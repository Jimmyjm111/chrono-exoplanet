"""
==============================================================================
配置模块 (config.py)
==============================================================================

【学习目标】
本模块帮助你学习Python的基础概念：
1. 变量的定义和赋值
2. 基本数据类型：字符串(str)、整数(int)、浮点数(float)、布尔值(bool)
3. 复合数据类型：列表(list)、字典(dict)
4. 常量的命名规范（全大写）

【核心概念解释】
- 变量：用来存储数据的容器，可以随时改变值
- 常量：约定俗成全大写命名，表示不应该被修改的值
- 字典：key-value（键值对）结构，通过key快速查找value
- 列表：有序的数据集合，可以存储多个元素

==============================================================================
"""

# ==============================================================================
# 第一部分：基本数据类型示例
# ==============================================================================

# 字符串(str)：用引号包围的文本
# 单引号和双引号都可以，效果相同
PROJECT_NAME = "跨境支付费率分析系统"
VERSION = '1.0.0'

# 整数(int)：没有小数点的数字
DEFAULT_TRANSACTION_COUNT = 1000  # 默认生成的交易数量

# 浮点数(float)：带小数点的数字
DEFAULT_EXCHANGE_RATE_USD_CNY = 7.25  # 美元兑人民币汇率

# 布尔值(bool)：只有True或False两个值
ENABLE_DEBUG_MODE = False  # 是否启用调试模式
SAVE_CHARTS_TO_FILE = True  # 是否保存图表到文件


# ==============================================================================
# 第二部分：列表(List) - 有序的数据集合
# ==============================================================================

# 列表用方括号[]定义，元素之间用逗号分隔
# 列表可以存储任意类型的数据，包括混合类型

# 支持的货币列表
SUPPORTED_CURRENCIES = [
    "USD",  # 美元
    "EUR",  # 欧元
    "GBP",  # 英镑
    "JPY",  # 日元
    "CNY",  # 人民币
    "HKD",  # 港币
    "SGD",  # 新加坡元
    "PHP",  # 菲律宾比索
]

# 交易状态权重（用于生成模拟数据）
# 大部分交易是成功的，少量处于pending或failed状态
TRANSACTION_STATUS_WEIGHTS = {
    "completed": 0.85,  # 成功
    "pending": 0.10,    # 处理中
    "failed": 0.05,     # 失败
}

# 交易金额区间（用于生成模拟数据）
# 这是一个包含元组(tuple)的列表
# 元组用圆括号()定义，一旦创建就不能修改
AMOUNT_RANGES = [
    (100, 1000),      # 小额交易：100-1000
    (1000, 10000),    # 中额交易：1000-10000
    (10000, 100000),  # 大额交易：10000-100000
]


# ==============================================================================
# 第三部分：字典(Dict) - 键值对存储
# ==============================================================================

# 字典用花括号{}定义
# 格式：{key: value, key2: value2}
# key必须是不可变类型（字符串、数字、元组）
# value可以是任意类型

# 货币兑人民币的汇率配置
EXCHANGE_RATES = {
    "USD": 7.25,    # 1美元 = 7.25人民币
    "EUR": 7.85,    # 1欧元 = 7.85人民币
    "GBP": 9.15,    # 1英镑 = 9.15人民币
    "JPY": 0.048,   # 1日元 = 0.048人民币
    "CNY": 1.0,     # 人民币对人民币
    "HKD": 0.93,    # 1港币 = 0.93人民币
    "SGD": 5.38,    # 1新加坡元 = 5.38人民币
    "PHP": 0.13,    # 1菲律宾比索 = 0.13人民币
}


# ==============================================================================
# 第四部分：嵌套字典 - 复杂数据结构
# ==============================================================================

# 字典可以嵌套，形成多层结构
# 这在配置复杂数据时非常有用

# 支付通道配置
# 每个通道包含：名称、基础费率、固定费用、支持的货币等
PAYMENT_CHANNELS = {
    # 通道ID作为key，通道详情作为value（也是一个字典）
    "bank_transfer": {
        "name": "银行电汇",
        "type": "bank",           # 通道类型
        "base_rate": 0.01,        # 基础费率：1%
        "fixed_fee": 25.0,        # 固定费用：25元
        "min_fee": 50.0,          # 最低收费：50元
        "max_fee": 500.0,         # 最高收费：500元
        "supported_currencies": ["USD", "EUR", "GBP", "JPY", "HKD"],
        "processing_days": 3,     # 处理天数
        "is_active": True,        # 是否启用
    },
    
    "swift": {
        "name": "SWIFT国际汇款",
        "type": "bank",
        "base_rate": 0.015,       # 1.5%
        "fixed_fee": 30.0,
        "min_fee": 80.0,
        "max_fee": 800.0,
        "supported_currencies": ["USD", "EUR", "GBP", "JPY", "SGD"],
        "processing_days": 5,
        "is_active": True,
    },
    
    "alipay_global": {
        "name": "支付宝国际",
        "type": "wallet",
        "base_rate": 0.02,        # 2%
        "fixed_fee": 0.0,         # 无固定费用
        "min_fee": 0.0,
        "max_fee": 0.0,           # 无上限
        "supported_currencies": ["USD", "EUR", "GBP", "JPY", "HKD", "SGD", "PHP"],
        "processing_days": 1,
        "is_active": True,
    },
    
    "wechat_pay": {
        "name": "微信支付跨境",
        "type": "wallet",
        "base_rate": 0.018,       # 1.8%
        "fixed_fee": 0.0,
        "min_fee": 0.0,
        "max_fee": 0.0,
        "supported_currencies": ["USD", "EUR", "JPY", "HKD", "SGD"],
        "processing_days": 1,
        "is_active": True,
    },
    
    "paypal": {
        "name": "PayPal",
        "type": "wallet",
        "base_rate": 0.025,       # 2.5%
        "fixed_fee": 0.35,        # 固定0.35美元（约2.5元）
        "min_fee": 0.0,
        "max_fee": 0.0,
        "supported_currencies": ["USD", "EUR", "GBP", "JPY", "HKD", "SGD"],
        "processing_days": 2,
        "is_active": True,
    },
    
    "unionpay_intl": {
        "name": "银联国际",
        "type": "card",
        "base_rate": 0.012,       # 1.2%
        "fixed_fee": 10.0,
        "min_fee": 30.0,
        "max_fee": 300.0,
        "supported_currencies": ["USD", "EUR", "GBP", "JPY", "HKD", "SGD", "PHP"],
        "processing_days": 2,
        "is_active": True,
    },
}


# ==============================================================================
# 第五部分：阶梯费率配置 - 展示列表和字典的组合使用
# ==============================================================================

# 某些通道可能根据交易金额采用阶梯费率
# 金额越大，费率越低
TIERED_RATES = {
    "bank_transfer": [
        # 每个元素是一个字典，包含金额上限和对应费率
        {"max_amount": 10000, "rate": 0.015},    # 0-10000：1.5%
        {"max_amount": 50000, "rate": 0.012},    # 10001-50000：1.2%
        {"max_amount": 100000, "rate": 0.01},    # 50001-100000：1%
        {"max_amount": float('inf'), "rate": 0.008},  # 100001以上：0.8%
        # float('inf') 表示正无穷大
    ],
    "swift": [
        {"max_amount": 10000, "rate": 0.02},
        {"max_amount": 50000, "rate": 0.015},
        {"max_amount": 100000, "rate": 0.012},
        {"max_amount": float('inf'), "rate": 0.01},
    ],
}


# ==============================================================================
# 第六部分：输出路径配置
# ==============================================================================

# 使用原始字符串(r"...")来避免反斜杠转义问题
# 在Windows路径中特别有用
OUTPUT_DIR = "output"
CHARTS_DIR = "output/charts"
REPORTS_DIR = "output/reports"

# 报表文件名配置
REPORT_FILENAME = "费率分析报告.xlsx"
SUMMARY_CHART_FILENAME = "费率对比汇总.png"


# ==============================================================================
# 第七部分：显示配置 - 用于可视化
# ==============================================================================

# 图表显示配置
CHART_CONFIG = {
    "figure_size": (12, 8),       # 图表尺寸（宽，高）英寸
    "dpi": 100,                   # 图片分辨率
    "font_family": "SimHei",      # 中文字体（黑体）
    "title_fontsize": 16,         # 标题字号
    "label_fontsize": 12,         # 标签字号
    "color_palette": [            # 配色方案
        "#2E86AB",  # 蓝色
        "#A23B72",  # 紫红色
        "#F18F01",  # 橙色
        "#C73E1D",  # 红色
        "#3B1F2B",  # 深紫色
        "#95C623",  # 黄绿色
    ],
}


# ==============================================================================
# 学习小结
# ==============================================================================
"""
【本模块学到的内容】

1. 变量命名规范：
   - 普通变量：小写字母，单词间用下划线分隔（snake_case）
   - 常量：全大写字母，单词间用下划线分隔

2. 基本数据类型：
   - str（字符串）：文本数据
   - int（整数）：没有小数的数字
   - float（浮点数）：带小数的数字
   - bool（布尔值）：True 或 False

3. 复合数据类型：
   - list（列表）：有序集合，用[]定义，可修改
   - tuple（元组）：有序集合，用()定义，不可修改
   - dict（字典）：键值对集合，用{}定义

4. 数据结构嵌套：
   - 字典可以嵌套字典
   - 列表可以包含字典
   - 灵活组合可以表达复杂的数据结构

【练习建议】
1. 尝试添加一个新的支付通道到PAYMENT_CHANNELS
2. 修改货币列表，添加您熟悉的货币
3. 调整阶梯费率，观察数据结构的变化
"""


# ==============================================================================
# 模块测试代码
# ==============================================================================

# 这段代码只在直接运行本文件时执行
# 当被其他模块导入时不会执行
if __name__ == "__main__":
    # print()函数用于输出信息到控制台
    print("=" * 60)
    print(f"项目名称: {PROJECT_NAME}")
    print(f"版本: {VERSION}")
    print("=" * 60)
    
    # f-string（格式化字符串）：在字符串前加f，可以在{}中嵌入变量
    print(f"\n支持的货币数量: {len(SUPPORTED_CURRENCIES)}")
    print(f"货币列表: {SUPPORTED_CURRENCIES}")
    
    print(f"\n支付通道数量: {len(PAYMENT_CHANNELS)}")
    
    # 遍历字典
    print("\n各通道基础费率：")
    for channel_id, channel_info in PAYMENT_CHANNELS.items():
        # channel_id 是键（如 "bank_transfer"）
        # channel_info 是值（包含通道详情的字典）
        name = channel_info["name"]
        rate = channel_info["base_rate"]
        # :.2% 格式化为百分比，保留2位小数
        print(f"  - {name}: {rate:.2%}")
